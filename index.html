<!DOCTYPE html>
<html lang="id">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Profil Pribadi - Araku</title>
    <style>
        @import url('https://fonts.googleapis.com/css2?family=Press+Start+2P&display=swap');

        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: 'Press Start 2P', cursive;
            background: linear-gradient(135deg, #ffeaa7 0%, #fdcb6e 50%, #fab1a0 100%);
            min-height: 100vh;
            padding: 20px;
            position: relative;
        }

        .floating-shapes {
            position: fixed;
            width: 100%;
            height: 100%;
            top: 0;
            left: 0;
            pointer-events: none;
            overflow: hidden;
            z-index: 0;
        }

        .shape {
            position: absolute;
            opacity: 0.1;
            animation: float 20s infinite ease-in-out;
        }

        .shape:nth-child(1) { top: 10%; left: 10%; animation-delay: 0s; }
        .shape:nth-child(2) { top: 60%; right: 15%; animation-delay: 3s; }
        .shape:nth-child(3) { bottom: 20%; left: 20%; animation-delay: 6s; }

        @keyframes float {
            0%, 100% { transform: translateY(0) rotate(0deg); }
            50% { transform: translateY(-30px) rotate(180deg); }
        }

        .container {
            max-width: 900px;
            margin: 0 auto;
            position: relative;
            z-index: 1;
        }

        /* Edit Mode Styles */
        .edit-mode .editable {
            position: relative;
            cursor: pointer;
            transition: all 0.3s ease;
            min-height: 20px;
        }

        .edit-mode .editable:hover {
            background-color: rgba(116, 185, 255, 0.1);
            outline: 2px dashed #74b9ff;
            padding: 2px;
            margin: -2px;
        }

        /* Admin Button */
        .admin-btn {
            position: fixed;
            bottom: 20px;
            right: 20px;
            background: linear-gradient(135deg, #ff7675 0%, #fd79a8 100%);
            border: 3px solid #2d3436;
            color: white;
            padding: 12px 20px;
            font-family: 'Press Start 2P', cursive;
            font-size: 0.45em;
            cursor: pointer;
            transition: all 0.3s ease;
            box-shadow: 4px 4px 0px rgba(45, 52, 54, 0.3);
            z-index: 100;
        }

        .admin-btn:hover {
            transform: translate(-4px, -4px);
            box-shadow: 8px 8px 0px rgba(45, 52, 54, 0.3);
        }

        /* Login Panel */
        .login-panel {
            position: fixed;
            top: 50%;
            left: 50%;
            transform: translate(-50%, -50%);
            background: white;
            border: 4px solid #2d3436;
            padding: 30px;
            width: 90%;
            max-width: 350px;
            box-shadow: 8px 8px 0px rgba(45, 52, 54, 0.5);
            text-align: center;
            z-index: 1000;
            display: none;
        }

        .login-panel.active {
            display: block;
        }

        .login-input {
            width: 100%;
            padding: 12px;
            margin-bottom: 15px;
            border: 3px solid #2d3436;
            font-family: 'Press Start 2P', cursive;
            font-size: 0.5em;
            outline: none;
        }

        .login-btn {
            background: linear-gradient(135deg, #74b9ff 0%, #a29bfe 100%);
            border: 3px solid #2d3436;
            color: white;
            padding: 12px 20px;
            font-family: 'Press Start 2P', cursive;
            font-size: 0.5em;
            cursor: pointer;
            margin: 5px;
            width: calc(50% - 10px);
        }

        .error-message {
            color: #ff6b6b;
            font-size: 0.35em;
            margin-bottom: 10px;
            min-height: 15px;
        }

        /* Upload Button */
        .upload-btn {
            background: linear-gradient(135deg, #a29bfe 0%, #74b9ff 100%);
            border: 2px solid #2d3436;
            color: white;
            padding: 8px 15px;
            font-family: 'Press Start 2P', cursive;
            font-size: 0.35em;
            cursor: pointer;
            margin: 5px 0;
            display: block;
            transition: all 0.3s ease;
        }

        .upload-btn:hover {
            transform: translate(-2px, -2px);
            box-shadow: 4px 4px 0px rgba(45, 52, 54, 0.3);
        }

        .hidden {
            display: none !important;
        }

        /* Profile Card Styles */
        .profile-card {
            background: white;
            border: 4px solid #2d3436;
            overflow: hidden;
            box-shadow: 8px 8px 0px rgba(45, 52, 54, 0.3);
            margin-bottom: 25px;
            transition: all 0.3s ease;
        }

        .profile-card:hover {
            transform: translate(-4px, -4px);
            box-shadow: 12px 12px 0px rgba(45, 52, 54, 0.3);
        }

        .hero {
            background: linear-gradient(135deg, #ff7675 0%, #fd79a8 100%);
            padding: 50px 30px;
            text-align: center;
            position: relative;
            border-bottom: 4px solid #2d3436;
        }

        .hero::after {
            content: '‚ö°';
            position: absolute;
            top: 20px;
            right: 30px;
            font-size: 2.5em;
            animation: pulse 2s infinite;
            opacity: 0.3;
        }

        @keyframes pulse {
            0%, 100% { transform: scale(1); }
            50% { transform: scale(1.2); }
        }

        .avatar {
            width: 120px;
            height: 120px;
            margin: 0 auto 25px;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 60px;
            border: 4px solid #2d3436;
            box-shadow: 6px 6px 0px rgba(45, 52, 54, 0.5);
            image-rendering: pixelated;
            animation: bounce 3s ease-in-out infinite;
            overflow: hidden;
            position: relative;
            background: #dfe6e9;
        }

        @keyframes bounce {
            0%, 100% { transform: translateY(0); }
            50% { transform: translateY(-15px); }
        }

        .avatar img {
            width: 100%;
            height: 100%;
            object-fit: cover;
        }

        .hero h1 {
            color: white;
            font-size: 1.5em;
            margin-bottom: 15px;
            font-weight: 400;
            text-shadow: 4px 4px 0px rgba(45, 52, 54, 0.8);
            line-height: 1.6;
        }

        .hero p {
            color: #2d3436;
            font-size: 0.5em;
            line-height: 1.8;
        }

        .section {
            background: white;
            border: 4px solid #2d3436;
            padding: 30px 25px;
            margin-bottom: 25px;
            box-shadow: 8px 8px 0px rgba(45, 52, 54, 0.3);
            position: relative;
        }

        .section::before {
            content: '';
            position: absolute;
            top: 10px;
            right: 10px;
            width: 15px;
            height: 15px;
            background: #ff6b6b;
            border: 2px solid #2d3436;
        }

        .section-title {
            color: #d63031;
            font-size: 0.85em;
            margin-bottom: 25px;
            display: flex;
            align-items: center;
            gap: 12px;
            font-weight: 400;
            line-height: 1.6;
            padding-bottom: 15px;
            border-bottom: 3px dashed #2d3436;
        }

        .section-title span {
            font-size: 1.3em;
        }

        .about-box {
            background: linear-gradient(135deg, #74b9ff 0%, #a29bfe 100%);
            border: 3px solid #2d3436;
            padding: 20px;
            margin-bottom: 20px;
            box-shadow: 4px 4px 0px rgba(45, 52, 54, 0.2);
            display: flex;
            gap: 20px;
            align-items: center;
            flex-wrap: wrap;
        }

        .about-box .about-photo {
            width: 270px;
            height: 290px;
            border: 4px solid #2d3436;
            box-shadow: 4px 4px 0px rgba(45, 52, 54, 0.3);
            flex-shrink: 0;
            object-fit: cover;
            image-rendering: auto;
            background: #dfe6e9;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 4em;
            color: #2d3436;
            overflow: hidden;
            position: relative;
        }

        .about-box .about-photo img {
            width: 100%;
            height: 100%;
            object-fit: cover;
        }

        .about-text {
            flex: 1;
            min-width: 250px;
        }

        .about-text p {
            color: white;
            font-size: 0.45em;
            line-height: 2;
            text-shadow: 2px 2px 0px rgba(45, 52, 54, 0.3);
        }

        .hobi-list {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(160px, 1fr));
            gap: 20px;
        }

        .hobi-item {
            background: linear-gradient(135deg, #ffeaa7 0%, #fdcb6e 100%);
            padding: 25px 20px;
            border: 3px solid #2d3436;
            text-align: center;
            transition: all 0.3s ease;
            cursor: pointer;
            box-shadow: 4px 4px 0px rgba(45, 52, 54, 0.3);
            position: relative;
        }

        .hobi-item::after {
            content: '';
            position: absolute;
            top: 5px;
            right: 5px;
            width: 8px;
            height: 8px;
            background: #ff6b6b;
            border: 2px solid #2d3436;
        }

        .hobi-item:hover {
            transform: translate(-4px, -4px);
            box-shadow: 8px 8px 0px rgba(45, 52, 54, 0.3);
            background: linear-gradient(135deg, #fdcb6e 0%, #ffeaa7 100%);
        }

        .hobi-item .icon {
            font-size: 3em;
            margin-bottom: 15px;
            image-rendering: pixelated;
        }

        .hobi-item h3 {
            color: #d63031;
            font-size: 0.6em;
            margin-bottom: 10px;
            font-weight: 400;
            line-height: 1.5;
        }

        .hobi-item p {
            color: #2d3436;
            font-size: 0.4em;
            line-height: 1.6;
        }

        .gallery {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(180px, 1fr));
            gap: 18px;
            margin-top: 20px;
        }

        .gallery-item {
            aspect-ratio: 1;
            background: linear-gradient(135deg, #74b9ff 0%, #a29bfe 100%);
            border: 4px solid #2d3436;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 4em;
            transition: all 0.3s ease;
            cursor: pointer;
            box-shadow: 4px 4px 0px rgba(45, 52, 54, 0.3);
            image-rendering: pixelated;
            position: relative;
            overflow: hidden;
        }

        .gallery-item::before {
            content: '';
            position: absolute;
            top: 8px;
            right: 8px;
            width: 12px;
            height: 12px;
            background: #ffeaa7;
            border: 2px solid #2d3436;
        }

        .gallery-item:hover {
            transform: translate(-4px, -4px) rotate(-5deg);
            box-shadow: 8px 8px 0px rgba(45, 52, 54, 0.3);
        }

        .gallery-item img {
            width: 100%;
            height: 100%;
            object-fit: cover;
        }

        /* Gallery Modal */
        .modal {
            display: none;
            position: fixed;
            z-index: 1000;
            left: 0;
            top: 0;
            width: 100%;
            height: 100%;
            background-color: rgba(0, 0, 0, 0.9);
            animation: fadeIn 0.3s;
        }

        .modal.active {
            display: flex;
            align-items: center;
            justify-content: center;
        }

        @keyframes fadeIn {
            from { opacity: 0; }
            to { opacity: 1; }
        }

        .modal-content {
            max-width: 90%;
            max-height: 90%;
            border: 4px solid #ffeaa7;
            box-shadow: 0 0 30px rgba(255, 234, 167, 0.5);
        }

        .modal-content img {
            width: 100%;
            height: 100%;
            object-fit: contain;
        }

        .close-modal {
            position: absolute;
            top: 20px;
            right: 30px;
            font-size: 3em;
            color: #ffeaa7;
            cursor: pointer;
            transition: all 0.3s;
            font-family: 'Press Start 2P', cursive;
            text-shadow: 3px 3px 0px rgba(0, 0, 0, 0.5);
        }

        .close-modal:hover {
            color: #ff6b6b;
            transform: scale(1.2);
        }

        .dream-box {
            background: linear-gradient(135deg, #ee5a6f 0%, #f29263 100%);
            padding: 25px;
            border: 4px solid #2d3436;
            position: relative;
            overflow: hidden;
            box-shadow: 4px 4px 0px rgba(45, 52, 54, 0.3);
        }

        .dream-box::before {
            content: '‚≠ê';
            position: absolute;
            font-size: 120px;
            opacity: 0.15;
            right: -20px;
            top: -20px;
            animation: spin 20s linear infinite;
        }

        @keyframes spin {
            from { transform: rotate(0deg); }
            to { transform: rotate(360deg); }
        }

        .dream-box h3 {
            color: white;
            font-size: 0.75em;
            margin-bottom: 15px;
            font-weight: 400;
            line-height: 1.6;
            text-shadow: 3px 3px 0px rgba(45, 52, 54, 0.5);
        }

        .dream-box p {
            color: white;
            line-height: 2;
            font-size: 0.5em;
        }

        .social-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(220px, 1fr));
            gap: 18px;
        }

        .social-item {
            background: linear-gradient(135deg, #fab1a0 0%, #ffeaa7 100%);
            border: 3px solid #2d3436;
            padding: 20px 18px;
            display: flex;
            align-items: center;
            gap: 15px;
            transition: all 0.3s ease;
            cursor: pointer;
            text-decoration: none;
            box-shadow: 4px 4px 0px rgba(45, 52, 54, 0.3);
        }

        .social-item:hover {
            transform: translate(-4px, -4px);
            box-shadow: 8px 8px 0px rgba(45, 52, 54, 0.3);
        }

        .social-item .icon {
            font-size: 2.5em;
            flex-shrink: 0;
            display: flex;
            align-items: center;
            justify-content: center;
        }

        .social-item .icon svg {
            width: 40px;
            height: 40px;
        }

        .social-item .info {
            flex: 1;
        }

        .social-item .platform {
            color: #d63031;
            font-size: 0.5em;
            margin-bottom: 8px;
        }

        .social-item .username {
            color: #2d3436;
            font-size: 0.4em;
            word-break: break-all;
        }

        .contact-grid {
            display: grid;
            gap: 18px;
        }

        .contact-item {
            background: linear-gradient(135deg, #74b9ff 0%, #a29bfe 100%);
            border: 3px solid #2d3436;
            padding: 20px 18px;
            display: flex;
            align-items: center;
            gap: 15px;
            box-shadow: 4px 4px 0px rgba(45, 52, 54, 0.3);
        }

        .contact-item .icon {
            font-size: 2.5em;
            flex-shrink: 0;
        }

        .contact-item .info {
            flex: 1;
        }

        .contact-item .label {
            color: white;
            font-size: 0.5em;
            margin-bottom: 8px;
            text-shadow: 2px 2px 0px rgba(45, 52, 54, 0.3);
        }

        .contact-item .value {
            color: #2d3436;
            font-size: 0.5em;
            word-break: break-all;
        }

        .footer {
            text-align: center;
            padding: 30px 20px;
            color: #2d3436;
            border-top: 3px dashed #2d3436;
            margin-top: 20px;
        }

        .footer p {
            font-size: 0.5em;
            line-height: 2;
        }

        /* Overlay for modal background */
        .overlay {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: rgba(0, 0, 0, 0.7);
            z-index: 999;
            display: none;
        }

        .overlay.active {
            display: block;
        }

        /* Loading spinner */
        .loading {
            display: inline-block;
            width: 20px;
            height: 20px;
            border: 3px solid #f3f3f3;
            border-top: 3px solid #3498db;
            border-radius: 50%;
            animation: spin 1s linear infinite;
        }

        @keyframes spin {
            0% { transform: rotate(0deg); }
            100% { transform: rotate(360deg); }
        }

        /* Status messages */
        .status-message {
            position: fixed;
            bottom: 80px;
            right: 20px;
            background: #2d3436;
            color: white;
            padding: 10px 15px;
            font-size: 0.35em;
            border-radius: 5px;
            z-index: 100;
            animation: slideIn 0.3s ease;
            display: none;
        }

        .status-message.show {
            display: block;
        }

        @keyframes slideIn {
            from { transform: translateX(100%); opacity: 0; }
            to { transform: translateX(0); opacity: 1; }
        }

        @media (max-width: 768px) {
            body {
                padding: 15px;
            }

            .hero {
                padding: 40px 20px;
            }

            .hero h1 {
                font-size: 1.1em;
            }

            .hero p {
                font-size: 0.45em;
            }

            .avatar {
                width: 100px;
                height: 100px;
                font-size: 50px;
            }

            .section {
                padding: 25px 20px;
            }

            .section-title {
                font-size: 0.75em;
            }

            .about-box {
                flex-direction: column;
                text-align: center;
            }

            .about-photo {
                width: 180px;
                height: 180px;
                margin: 0 auto;
            }

            .hobi-list {
                grid-template-columns: repeat(auto-fit, minmax(140px, 1fr));
                gap: 15px;
            }

            .gallery {
                grid-template-columns: repeat(2, 1fr);
                gap: 15px;
            }

            .gallery-item {
                font-size: 5em;
            }

            .social-grid {
                grid-template-columns: 1fr;
            }

            .close-modal {
                font-size: 2em;
                top: 15px;
                right: 20px;
            }

            .admin-btn {
                bottom: 15px;
                right: 15px;
                padding: 10px 15px;
                font-size: 0.4em;
            }

            .login-panel {
                padding: 20px;
                width: 95%;
            }
        }

        @media (max-width: 480px) {
            .hero h1 {
                font-size: 0.9em;
            }

            .section-title {
                font-size: 0.65em;
            }

            .hobi-list {
                grid-template-columns: 1fr;
            }

            .avatar {
                width: 100px;
                height: 100px;
                font-size: 45px;
            }

            .gallery {
                grid-template-columns: 1fr;
                gap: 20px;
            }

            .gallery-item {
                font-size: 6em;
                min-height: 250px;
            }

            .about-photo {
                width: 200px;
                height: 200px;
            }
            
            .admin-btn {
                bottom: 10px;
                right: 10px;
                padding: 8px 12px;
                font-size: 0.35em;
            }
        }
    </style>
</head>
<body>
    <!-- Status Message -->
    <div class="status-message" id="statusMessage"></div>

    <!-- Admin Button -->
    <button class="admin-btn" id="mainAdminBtn" onclick="toggleLogin()">üîê EDIT PROFILE</button>

    <!-- Login Panel -->
    <div id="loginOverlay" class="overlay"></div>
    <div id="loginPanel" class="login-panel">
        <h2 style="font-size: 0.8em; margin-bottom: 20px;">LOGIN ADMIN</h2>
        <div class="error-message" id="loginError"></div>
        <input type="password" id="passwordInput" class="login-input" placeholder="Password" autocomplete="off">
        <div style="display: flex; gap: 10px;">
            <button onclick="checkLogin()" class="login-btn">LOGIN</button>
            <button onclick="hideLogin()" class="login-btn" style="background: linear-gradient(135deg, #fab1a0 0%, #ffeaa7 100%);">BATAL</button>
        </div>
        <p style="font-size: 0.3em; color: #2d3436; margin-top: 15px; opacity: 0.7;">
            Password: arakuganteng
        </p>
    </div>

    <!-- Floating Shapes -->
    <div class="floating-shapes">
        <div class="shape" style="font-size: 80px;">üå∏</div>
        <div class="shape" style="font-size: 70px;">üíÆ</div>
        <div class="shape" style="font-size: 90px;">üå∫</div>
    </div>

    <!-- Hidden File Inputs -->
    <input type="file" id="avatarUpload" class="hidden" accept="image/*">
    <input type="file" id="aboutUpload" class="hidden" accept="image/*">
    <input type="file" id="galleryUpload" class="hidden" accept="image/*" multiple>

    <!-- Main Content -->
    <div class="container">
        <!-- Profile Card -->
        <div class="profile-card">
            <div class="hero">
                <div class="avatar">
                    <img src="" alt="Avatar" id="avatarImg" onerror="this.onerror=null; this.src='https://placehold.co/120x120/2d3436/ffffff?text=AKU'">
                </div>
                <h1 id="nameText">Araku</h1>
                <p id="taglineText">Suka Anime ‚Ä¢ Keren ‚Ä¢ Sop boi ‚Ä¢ Suka Gambar (kalau mau)</p>
            </div>
        </div>

        <!-- About Section -->
        <div class="section">
            <div class="section-title">
                <span>üë§</span>
                <span id="aboutTitleText">About Me</span>
            </div>
            <div class="about-box">
                <div class="about-photo">
                    <img src="" alt="Foto Profil" id="aboutImg" onerror="this.onerror=null; this.src='https://placehold.co/270x290/74b9ff/ffffff?text=ABOUT'">
                </div>
                <div class="about-text">
                    <p id="aboutText">ssasasas Saya pecinta anime dan seni yang passionate dalam menggambar. Saya percaya setiap goresan pensil adalah ekspresi jiwa, dan setiap karya adalah perjalanan menuju mimpi!</p>
                </div>
            </div>
        </div>

        <!-- Hobi Section -->
        <div class="section">
            <div class="section-title">
                <span>üé®</span>
                <span id="hobiTitleText">Hobi</span>
            </div>
            <div class="hobi-list">
                <div class="hobi-item">
                    <div class="icon">‚úèÔ∏è</div>
                    <h3 id="hobi1TitleText">Menggambar</h3>
                    <p id="hobi1DescText">Gambar itu my hobi aku guweh tapi males soalnya susah jirr</p>
                </div>
                <div class="hobi-item">
                    <div class="icon">üì∫</div>
                    <h3 id="hobi2TitleText">Nonton Anime</h3>
                    <p id="hobi2DescText">Penyuka genre Action & Romance cuiiii</p>
                </div>
                <div class="hobi-item">
                    <div class="icon">üìñ</div>
                    <h3 id="hobi3TitleText">Baca Manga</h3>
                    <p id="hobi3DescText">Suka baca manga juga buat liat karya dari para mangaka dan menikmati karya nya</p>
                </div>
                <div class="hobi-item">
                    <div class="icon">üéÆ</div>
                    <h3 id="hobi4TitleText">Main Game</h3>
                    <p id="hobi4DescText">siapa coba yang gak suka main game, game favoritku ituh ZZZ</p>
                </div>
            </div>
            
            <!-- Gallery Section -->
            <div style="margin-top: 35px;">
                <div class="section-title">
                    <span>üñºÔ∏è</span>
                    <span id="galleryTitleText">Sedikit gambaran ku</span>
                </div>
                
                <div class="gallery" id="galleryContainer">
                    <!-- Gallery items will be loaded here -->
                </div>
            </div>
        </div>

        <!-- Cita-Cita Section -->
        <div class="section">
            <div class="section-title">
                <span>‚≠ê</span>
                <span id="dreamTitleText">Cita-Cita</span>
            </div>
            <div class="dream-box">
                <h3 id="dreamSubtitleText">Mimpi Besar akuh üåü</h3>
                <p id="dreamText">
                    Aku bercita-cita jadi seorang Mangaka profesional yang karyanya menginspirasi banyak orang. aku pengen ngeciptain cerita dan karakter sendiri yang bermakna, kayak manga dan anime favorit aku yang udah mengubah hidup aku. Suatu hari nanti, aku harap aku bisa menerbitkan manga sendiri dan berbagi karya dengan dunia!
                </p>
            </div>
        </div>

        <!-- Social Media Section -->
        <div class="section">
            <div class="section-title">
                <span>üåê</span>
                <span id="socialTitleText">Social Media</span>
            </div>
            <div class="social-grid">
                <!-- [KEEP ALL SOCIAL MEDIA LINKS] -->
            </div>
        </div>

        <!-- Kontak Section -->
        <div class="section">
            <div class="section-title">
                <span>üìß</span>
                <span id="contactTitleText">Kontak</span>
            </div>
            <div class="contact-grid">
                <!-- [KEEP ALL CONTACT INFO] -->
            </div>
        </div>

        <!-- Footer -->
        <div class="footer">
            <p id="footerText">‚ú® "Follow your dreams and never give up!" ‚ú®</p>
            <p style="margin-top: 15px; opacity: 0.7;">Made by Araku 2025</p>
        </div>
    </div>

    <!-- Gallery Modal -->
    <div id="galleryModal" class="modal">
        <div class="close-modal" onclick="closeModal()">‚úï</div>
        <div class="modal-content">
            <img id="modalImage" src="" alt="">
        </div>
    </div>

    <script>
        // ==================== KONFIGURASI ====================
        const APPS_SCRIPT_URL = "https://script.google.com/macros/s/AKfycbxENYB1Z_TO6CHudaj75icyqPAUnaAeCP5XBpzoWgu2-qPX-tO0xJrGBVDeuEhh5rVTcA/exec";
        const CORRECT_PASSWORD = "arakuganteng";
        
        // State
        let isLoggedIn = false;
        let isEditMode = false;
        let galleryImages = [];
        let serverData = null;

        // ==================== INITIALIZATION ====================
        document.addEventListener('DOMContentLoaded', async function() {
            console.log('=== ARAKU PROFILE SYSTEM ===');
            
            // Cek login
            if (localStorage.getItem('araku_profile_logged_in') === 'true') {
                isLoggedIn = true;
                enableEditMode();
                document.getElementById('mainAdminBtn').textContent = "üîì EDIT MODE ON";
            }
            
            // Load data dari server TERLEBIH DAHULU
            await loadDataFromServer();
            
            // Setup listeners
            setupEventListeners();
            
            // Auto refresh data setiap 30 detik
            setInterval(async () => {
                await loadDataFromServer();
            }, 30000);
        });

        // ==================== SERVER FUNCTIONS ====================
        async function loadDataFromServer() {
            try {
                const url = APPS_SCRIPT_URL + '?action=get_data&_=' + Date.now();
                const response = await fetch(url);
                
                if (!response.ok) {
                    throw new Error('HTTP ' + response.status);
                }
                
                const result = await response.json();
                
                if (result.success && result.data) {
                    serverData = result.data;
                    updateUIFromServerData();
                    showStatus('Data server dimuat', 'success');
                    console.log('Server data loaded:', result.data);
                }
            } catch (error) {
                console.log('Gagal load dari server:', error.message);
                // Tetap tampilkan data lokal
                loadLocalData();
            }
        }

        async function saveToServer(type, data, fileName = '') {
            try {
                showStatus('Menyimpan ke server...', 'info');
                
                // Buat payload
                const payload = {
                    action: 'save_data',
                    type: type,
                    data: data,
                    file_name: fileName,
                    timestamp: new Date().toISOString()
                };
                
                // Kirim ke server
                const formData = new FormData();
                formData.append('payload', JSON.stringify(payload));
                
                await fetch(APPS_SCRIPT_URL, {
                    method: 'POST',
                    mode: 'no-cors',
                    body: formData
                });
                
                // Refresh data dari server
                setTimeout(async () => {
                    await loadDataFromServer();
                }, 1000);
                
                return true;
            } catch (error) {
                console.error('Save to server error:', error);
                return false;
            }
        }

        async function uploadImageToServer(imageData, type, fileName) {
            try {
                // Untuk gambar besar, kita perlu compress
                let compressedData = await compressImage(imageData, 0.7); // 70% quality
                
                const payload = {
                    action: 'upload_image',
                    type: type,
                    image_data: compressedData,
                    file_name: fileName || `${type}_${Date.now()}`
                };
                
                // Kirim via FormData
                const formData = new FormData();
                for (const key in payload) {
                    formData.append(key, payload[key]);
                }
                
                // Kirim request
                await fetch(APPS_SCRIPT_URL, {
                    method: 'POST',
                    mode: 'no-cors',
                    body: formData
                });
                
                console.log('Image upload attempted');
                return true;
            } catch (error) {
                console.error('Image upload error:', error);
                return false;
            }
        }

        // ==================== IMAGE COMPRESSION ====================
        async function compressImage(dataUrl, quality = 0.7) {
            return new Promise((resolve) => {
                const img = new Image();
                img.onload = function() {
                    const canvas = document.createElement('canvas');
                    canvas.width = img.width;
                    canvas.height = img.height;
                    
                    const ctx = canvas.getContext('2d');
                    ctx.drawImage(img, 0, 0);
                    
                    // Compress
                    const compressedDataUrl = canvas.toDataURL('image/jpeg', quality);
                    resolve(compressedDataUrl);
                };
                img.src = dataUrl;
            });
        }

        // ==================== UI UPDATE FUNCTIONS ====================
        function updateUIFromServerData() {
            if (!serverData) return;
            
            // Update avatar
            if (serverData.avatar && serverData.avatar.startsWith('data:image')) {
                document.getElementById('avatarImg').src = serverData.avatar;
                localStorage.setItem('araku_profile_avatar', serverData.avatar);
            }
            
            // Update about
            if (serverData.about && serverData.about.startsWith('data:image')) {
                document.getElementById('aboutImg').src = serverData.about;
                localStorage.setItem('araku_profile_about', serverData.about);
            }
            
            // Update gallery
            if (serverData.gallery && Array.isArray(serverData.gallery)) {
                galleryImages = serverData.gallery;
                localStorage.setItem('araku_profile_gallery', JSON.stringify(galleryImages));
                renderGallery();
            }
            
            // Update texts
            if (serverData.texts) {
                updateTextsFromServer(serverData.texts);
            }
        }

        function updateTextsFromServer(texts) {
            const textMap = {
                'name': 'nameText',
                'tagline': 'taglineText',
                'aboutText': 'aboutText',
                'aboutTitle': 'aboutTitleText',
                'hobiTitle': 'hobiTitleText',
                'hobi1Title': 'hobi1TitleText',
                'hobi1Desc': 'hobi1DescText',
                'hobi2Title': 'hobi2TitleText',
                'hobi2Desc': 'hobi2DescText',
                'hobi3Title': 'hobi3TitleText',
                'hobi3Desc': 'hobi3DescText',
                'hobi4Title': 'hobi4TitleText',
                'hobi4Desc': 'hobi4DescText',
                'galleryTitle': 'galleryTitleText',
                'dreamTitle': 'dreamTitleText',
                'dreamSubtitle': 'dreamSubtitleText',
                'dreamText': 'dreamText',
                'socialTitle': 'socialTitleText',
                'footerText': 'footerText'
            };
            
            Object.keys(texts).forEach(key => {
                const elementId = textMap[key];
                if (elementId) {
                    const element = document.getElementById(elementId);
                    if (element && texts[key]) {
                        element.textContent = texts[key];
                        localStorage.setItem('araku_profile_' + key, texts[key]);
                    }
                }
            });
        }

        function loadLocalData() {
            // Fallback ke data lokal jika server down
            const avatar = localStorage.getItem('araku_profile_avatar');
            const about = localStorage.getItem('araku_profile_about');
            const gallery = localStorage.getItem('araku_profile_gallery');
            
            if (avatar) document.getElementById('avatarImg').src = avatar;
            if (about) document.getElementById('aboutImg').src = about;
            if (gallery) {
                try {
                    galleryImages = JSON.parse(gallery);
                    renderGallery();
                } catch (e) {
                    galleryImages = [];
                }
            }
        }

        // ==================== IMAGE UPLOAD HANDLERS ====================
        async function handleImageUpload(event, type) {
            const file = event.target.files[0];
            if (!file) return;
            
            // Validasi
            if (file.size > 2 * 1024 * 1024) {
                showStatus('Maksimal 2MB!', 'error');
                return;
            }
            
            if (!file.type.startsWith('image/')) {
                showStatus('File harus gambar!', 'error');
                return;
            }
            
            const reader = new FileReader();
            
            reader.onload = async function(e) {
                const imageData = e.target.result;
                
                // Update UI langsung
                if (type === 'avatar') {
                    document.getElementById('avatarImg').src = imageData;
                } else if (type === 'about') {
                    document.getElementById('aboutImg').src = imageData;
                }
                
                // Simpan ke localStorage sebagai cache
                localStorage.setItem('araku_profile_' + type, imageData);
                
                // Upload ke server
                const uploadSuccess = await uploadImageToServer(imageData, type, file.name);
                
                if (uploadSuccess) {
                    showStatus('Gambar berhasil diupload ke server!', 'success');
                    
                    // Refresh data dari server
                    setTimeout(async () => {
                        await loadDataFromServer();
                    }, 1500);
                } else {
                    showStatus('Upload gagal, coba lagi nanti', 'error');
                }
            };
            
            reader.onerror = function() {
                showStatus('Gagal membaca file', 'error');
            };
            
            reader.readAsDataURL(file);
            event.target.value = '';
        }

        async function handleGalleryUpload(event) {
            const files = event.target.files;
            if (!files.length) return;
            
            showStatus(`Mengupload ${files.length} gambar...`, 'info');
            
            for (const file of Array.from(files)) {
                if (file.size > 2 * 1024 * 1024) {
                    showStatus(`${file.name}: Terlalu besar (>2MB)`, 'warning');
                    continue;
                }
                
                if (!file.type.startsWith('image/')) {
                    showStatus(`${file.name}: Bukan gambar`, 'warning');
                    continue;
                }
                
                const reader = new FileReader();
                
                reader.onload = async function(e) {
                    const imageData = e.target.result;
                    
                    // Upload ke server
                    await uploadImageToServer(imageData, 'gallery', file.name);
                    
                    // Refresh gallery dari server
                    setTimeout(async () => {
                        await loadDataFromServer();
                    }, 1000);
                };
                
                reader.readAsDataURL(file);
                
                // Delay antar file
                await new Promise(resolve => setTimeout(resolve, 500));
            }
            
            showStatus('Upload selesai!', 'success');
            event.target.value = '';
        }

        // ==================== RENDER GALLERY ====================
        function renderGallery() {
            const container = document.getElementById('galleryContainer');
            
            if (!galleryImages || galleryImages.length === 0) {
                container.innerHTML = `
                    <div style="grid-column: 1 / -1; text-align: center; padding: 40px; color: #666;">
                        <div style="font-size: 3em; margin-bottom: 20px;">üñºÔ∏è</div>
                        <p style="font-size: 0.5em;">Belum ada gambar di gallery</p>
                        ${isLoggedIn ? '<p style="font-size: 0.3em; margin-top: 10px; opacity: 0.7;">Klik "Tambah Gambar" untuk upload</p>' : ''}
                    </div>
                `;
                return;
            }
            
            container.innerHTML = '';
            
            galleryImages.forEach((image, index) => {
                const item = document.createElement('div');
                item.className = 'gallery-item';
                item.onclick = () => openModal(image.src);
                
                const img = document.createElement('img');
                img.src = image.src;
                img.alt = image.alt || `Karya ${index + 1}`;
                img.loading = 'lazy';
                
                // Handle broken images
                img.onerror = function() {
                    this.src = 'https://placehold.co/300x300/74b9ff/ffffff?text=Gambar';
                };
                
                // Delete button in edit mode
                if (isEditMode && isLoggedIn) {
                    const delBtn = document.createElement('button');
                    delBtn.className = 'upload-btn';
                    delBtn.innerHTML = 'üóëÔ∏è';
                    delBtn.style.cssText = `
                        position: absolute;
                        top: 5px;
                        left: 5px;
                        z-index: 10;
                        padding: 5px 8px;
                        font-size: 0.25em;
                    `;
                    delBtn.onclick = async (e) => {
                        e.stopPropagation();
                        if (confirm('Hapus gambar ini?')) {
                            // Hapus dari server
                            await deleteGalleryImage(index);
                        }
                    };
                    item.appendChild(delBtn);
                }
                
                item.appendChild(img);
                container.appendChild(item);
            });
        }

        async function deleteGalleryImage(index) {
            try {
                showStatus('Menghapus gambar...', 'info');
                
                // Kirim request delete ke server
                const payload = {
                    action: 'delete_image',
                    index: index,
                    timestamp: new Date().toISOString()
                };
                
                const formData = new FormData();
                formData.append('payload', JSON.stringify(payload));
                
                await fetch(APPS_SCRIPT_URL, {
                    method: 'POST',
                    mode: 'no-cors',
                    body: formData
                });
                
                // Refresh data
                await loadDataFromServer();
                showStatus('Gambar dihapus', 'success');
                
            } catch (error) {
                showStatus('Gagal menghapus', 'error');
            }
        }

        // ==================== MODAL FUNCTIONS ====================
        function openModal(imageSrc) {
            document.getElementById('modalImage').src = imageSrc;
            document.getElementById('galleryModal').classList.add('active');
            document.body.style.overflow = 'hidden';
        }

        function closeModal() {
            document.getElementById('galleryModal').classList.remove('active');
            document.body.style.overflow = 'auto';
        }

        // ==================== LOGIN & EDIT FUNCTIONS ====================
        function toggleLogin() {
            if (isLoggedIn) {
                toggleEditMode();
            } else {
                showLogin();
            }
        }

        function showLogin() {
            document.getElementById('loginOverlay').classList.add('active');
            document.getElementById('loginPanel').classList.add('active');
            document.getElementById('passwordInput').focus();
        }

        function hideLogin() {
            document.getElementById('loginOverlay').classList.remove('active');
            document.getElementById('loginPanel').classList.remove('active');
            document.getElementById('passwordInput').value = '';
            document.getElementById('loginError').textContent = '';
        }

        function checkLogin() {
            const passwordInput = document.getElementById('passwordInput');
            const errorMessage = document.getElementById('loginError');
            const enteredPassword = passwordInput.value;
            
            if (enteredPassword === CORRECT_PASSWORD) {
                isLoggedIn = true;
                localStorage.setItem('araku_profile_logged_in', 'true');
                enableEditMode();
                hideLogin();
                document.getElementById('mainAdminBtn').textContent = "üîì EDIT MODE ON";
                showStatus('Login berhasil! Mode edit aktif', 'success');
            } else {
                errorMessage.textContent = "Password salah!";
                passwordInput.value = "";
                passwordInput.focus();
                showStatus('Password salah', 'error');
            }
        }

        function enableEditMode() {
            // Add upload buttons
            addUploadButtons();
            
            // Add text editing
            document.body.classList.add('edit-mode');
            
            // Re-render gallery with delete buttons
            renderGallery();
        }

        function addUploadButtons() {
            // Avatar button
            const avatarContainer = document.querySelector('.avatar');
            if (avatarContainer && !avatarContainer.querySelector('.edit-btn')) {
                const btn = document.createElement('button');
                btn.className = 'upload-btn edit-btn';
                btn.textContent = 'üì∑ Ganti';
                btn.style.cssText = `
                    position: absolute;
                    bottom: 5px;
                    left: 50%;
                    transform: translateX(-50%);
                    z-index: 10;
                `;
                btn.onclick = () => document.getElementById('avatarUpload').click();
                avatarContainer.appendChild(btn);
            }
            
            // About button
            const aboutContainer = document.querySelector('.about-photo');
            if (aboutContainer && !aboutContainer.querySelector('.edit-btn')) {
                const btn = document.createElement('button');
                btn.className = 'upload-btn edit-btn';
                btn.textContent = 'üì∑ Ganti';
                btn.style.cssText = `
                    position: absolute;
                    bottom: 5px;
                    left: 50%;
                    transform: translateX(-50%);
                    z-index: 10;
                `;
                btn.onclick = () => document.getElementById('aboutUpload').click();
                aboutContainer.appendChild(btn);
            }
            
            // Gallery button
            const galleryTitle = document.querySelector('.section-title:has(#galleryTitleText)');
            if (galleryTitle && !galleryTitle.querySelector('.edit-btn')) {
                const btn = document.createElement('button');
                btn.className = 'upload-btn edit-btn';
                btn.textContent = '‚ûï Tambah Gambar';
                btn.style.marginLeft = '20px';
                btn.onclick = () => document.getElementById('galleryUpload').click();
                galleryTitle.appendChild(btn);
            }
        }

        function toggleEditMode() {
            if (!isLoggedIn) return;
            
            isEditMode = !isEditMode;
            document.body.classList.toggle('edit-mode', isEditMode);
            
            const btn = document.getElementById('mainAdminBtn');
            btn.textContent = isEditMode ? "üíæ EDIT MODE ON" : "üîì EDIT MODE OFF";
            
            renderGallery();
        }

        // ==================== UTILITY FUNCTIONS ====================
        function showStatus(message, type = 'info') {
            const el = document.getElementById('statusMessage');
            el.textContent = message;
            el.style.backgroundColor = 
                type === 'success' ? '#2ecc71' :
                type === 'error' ? '#e74c3c' :
                type === 'warning' ? '#f39c12' : '#3498db';
            el.classList.add('show');
            
            setTimeout(() => {
                el.classList.remove('show');
            }, 3000);
        }

        function setupEventListeners() {
            // File inputs
            document.getElementById('avatarUpload').addEventListener('change', (e) => handleImageUpload(e, 'avatar'));
            document.getElementById('aboutUpload').addEventListener('change', (e) => handleImageUpload(e, 'about'));
            document.getElementById('galleryUpload').addEventListener('change', (e) => handleGalleryUpload(e));
            
            // Login
            document.getElementById('passwordInput').addEventListener('keypress', (e) => {
                if (e.key === 'Enter') checkLogin();
            });
            
            // Modal close
            document.querySelector('.close-modal').addEventListener('click', closeModal);
            document.getElementById('galleryModal').addEventListener('click', (e) => {
                if (e.target === e.currentTarget) closeModal();
            });
            
            // ESC key
            document.addEventListener('keydown', (e) => {
                if (e.key === 'Escape') {
                    closeModal();
                    hideLogin();
                }
            });
        }

        // Double click logout
        let clickCount = 0;
        document.getElementById('mainAdminBtn').addEventListener('click', function() {
            clickCount++;
            setTimeout(() => {
                if (clickCount === 2 && isLoggedIn) {
                    if (confirm('Logout dari admin mode?')) {
                        isLoggedIn = false;
                        isEditMode = false;
                        localStorage.removeItem('araku_profile_logged_in');
                        document.body.classList.remove('edit-mode');
                        this.textContent = "üîê EDIT PROFILE";
                        
                        // Remove edit buttons
                        document.querySelectorAll('.edit-btn').forEach(btn => btn.remove());
                        
                        renderGallery();
                        showStatus('Logged out', 'info');
                    }
                }
                clickCount = 0;
            }, 300);
        });

        // Manual sync button (via console)
        window.syncNow = async function() {
            showStatus('Menyinkronkan...', 'info');
            await loadDataFromServer();
        };

        console.log('=== SYSTEM READY ===');
        console.log('Server URL:', APPS_SCRIPT_URL);
        console.log('Commands:');
        console.log('- syncNow() - Force sync from server');
        console.log('- serverData - View server data');
    </script>
</body>
</html>
